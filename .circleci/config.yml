jobs:
  build:
    docker:
      - image: cimg/rust:1.70.0
    steps:
      - checkout
      - run: cargo --version
      - run: cargo build --features reqwest
      - run: rustup target add wasm32-wasi
      - run: cargo build --features spin --target wasm32-wasi
      - run: cargo install espup
      - run: cargo --list
      - run: espup install
      - run: cargo install riscv32imc-esp-espidf
      - run: cargo build --target riscv32imc-esp-espidf --features esp32